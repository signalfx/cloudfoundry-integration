---
name: signalfx-firehose-nozzle

templates:
  ctl.erb: bin/ctl
  logrotate.conf.erb: config/logrotate.conf
  logrotate.cron.erb: config/logrotate.cron
  envvars.erb: config/envvars

packages:
  - signalfx_agent
  - golang1.8

properties:
  cf.api_url:
    description: "Cloud Controller API URL"
  cf.traffic_controller_url:
    description: "Traffic controller URL"
  signalfx.ingest_url:
    description: "The API Ingest Endpoint for SignalFx"
    default: ""
  signalfx.access_token:
    description: "The SignalFx API access token to use while submitting requests"
  signalfx.flush_interval_seconds:
    description: "The duration in seconds between flushes to signalfx"
    default: 3
  signalfx.logrotate.freq_min:
    description: "The frequency in minutes which logrotate will rotate VM logs"
    default: 5
  signalfx.logrotate.rotate:
    description: "The number of files that logrotate will keep around on the VM"
    default: 3
  signalfx.logrotate.size:
    description: "The size at which logrotate will decide to rotate the log file"
    default: 50M

  uaa.url:
    description: "URL for the UAA server"
  uaa.username:
    description: "The client that has access to the loggregator firehose"
  uaa.password:
    description: "The secret for the user"
  nozzle.insecure_ssl_skip_verify:
    description: "Skip verifying SSL certificate"
  nozzle.subscription_id:
    description: "The subscription id to be used for the firehose"
  nozzle.idle_timeout_seconds:
    description: "Number of seconds to wait before timing out the read to the firehose, if there are no messages"
    default: 60
  nozzle.app_metadata_cache_expiry_seconds:
    description: "Number of seconds to cache app metadata that is used as SignalFx dimensions (e.g. app name, space/org info)"
    default: 300
